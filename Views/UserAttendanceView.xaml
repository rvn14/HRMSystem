<UserControl x:Class="HRM_System.Views.UserAttendanceView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:HRM_System.Views"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Border Padding="10" BorderThickness="1" BorderBrush="#80CCCCCC" CornerRadius="8" Background="#F0F0F0">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*"/>
                <ColumnDefinition Width="1.5*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Column - Attendance Calendar -->
            <Grid Grid.Column="0" Margin="0,0,10,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="ATTENDANCE CALENDAR" FontWeight="Bold" FontSize="14" Margin="5,0,0,5"/>
                <Border Grid.Row="1" Background="White" CornerRadius="8">
                    <Grid Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Viewbox for responsive calendar scaling -->
                        <Viewbox Grid.Row="0" Stretch="Uniform" StretchDirection="Both">
                            <!-- Calendar Control with Custom Template -->
                            <Calendar x:Name="attendanceCalendar"
                                      BorderThickness="0"
                                      Background="White"
                                      Width="561">
                                <Calendar.Resources>
                                    <!-- Style for Calendar Day Buttons -->
                                    <Style TargetType="{x:Type CalendarDayButton}">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type CalendarDayButton}">
                                                    <Grid>
                                                        <!-- Background for attendance status -->
                                                        <Border x:Name="AttendanceBackground" 
                                                                Background="Transparent"
                                                                CornerRadius="2"/>

                                                        <!-- Default template content -->
                                                        <ContentPresenter HorizontalAlignment="Center" 
                                                                          VerticalAlignment="Center"/>
                                                    </Grid>
                                                    <ControlTemplate.Triggers>
                                                        <!-- Attendance status triggers -->
                                                        <Trigger Property="Tag" Value="Present">
                                                            <Setter TargetName="AttendanceBackground" Property="Background" Value="#4CAF50"/>
                                                            <Setter Property="Foreground" Value="White"/>
                                                        </Trigger>
                                                        <Trigger Property="Tag" Value="Absent">
                                                            <Setter TargetName="AttendanceBackground" Property="Background" Value="#F44336"/>
                                                            <Setter Property="Foreground" Value="White"/>
                                                        </Trigger>
                                                        <Trigger Property="Tag" Value="Leave">
                                                            <Setter TargetName="AttendanceBackground" Property="Background" Value="#2196F3"/>
                                                            <Setter Property="Foreground" Value="White"/>
                                                        </Trigger>
                                                        <Trigger Property="Tag" Value="Late">
                                                            <Setter TargetName="AttendanceBackground" Property="Background" Value="#FFC107"/>
                                                            <Setter Property="Foreground" Value="White"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Calendar.Resources>
                                <Calendar.CalendarButtonStyle>
                                    <Style TargetType="{x:Type CalendarButton}">
                                        <Setter Property="MinWidth" Value="40"/>
                                        <Setter Property="MinHeight" Value="40"/>
                                        <Setter Property="FontSize" Value="14"/>
                                    </Style>
                                </Calendar.CalendarButtonStyle>
                                <Calendar.CalendarDayButtonStyle>
                                    <Style TargetType="{x:Type CalendarDayButton}">
                                        <Setter Property="MinWidth" Value="40"/>
                                        <Setter Property="MinHeight" Value="40"/>
                                        <Setter Property="FontSize" Value="14"/>
                                    </Style>
                                </Calendar.CalendarDayButtonStyle>
                            </Calendar>
                        </Viewbox>

                        <!-- Attendance Legend -->
                        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,10,0,0" 
                                    HorizontalAlignment="Center">
                            <StackPanel Orientation="Horizontal" Margin="5,0">
                                <Rectangle Width="15" Height="15" Fill="#4CAF50" Margin="0,0,5,0"/>
                                <TextBlock Text="Present" VerticalAlignment="Center"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="5,0">
                                <Rectangle Width="15" Height="15" Fill="#F44336" Margin="0,0,5,0"/>
                                <TextBlock Text="Absent" VerticalAlignment="Center"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="5,0">
                                <Rectangle Width="15" Height="15" Fill="#2196F3" Margin="0,0,5,0"/>
                                <TextBlock Text="Leave" VerticalAlignment="Center"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="5,0">
                                <Rectangle Width="15" Height="15" Fill="#FFC107" Margin="0,0,5,0"/>
                                <TextBlock Text="Late" VerticalAlignment="Center"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>

            <!-- Right Column - Requests & Balance -->
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Pending Requests Section -->
                <TextBlock Grid.Row="0" Text="PENDING REQUESTS" FontWeight="Bold" FontSize="14" Margin="5,0,0,5"/>
                <Border Grid.Row="1" Background="White" CornerRadius="8" Margin="0,0,0,15">
                    <!-- Pending requests content would go here -->
                </Border>

                <!-- Leave Balance Section -->
                <TextBlock Grid.Row="2" Text="LEAVE BALANCE" FontWeight="Bold" FontSize="14" Margin="5,0,0,5"/>
                <Border Grid.Row="2" Background="White" CornerRadius="8" Margin="0,25,0,15">
                    <!-- Leave balance content would go here -->
                </Border>

                <!-- Request for a Leave Button -->
                <Button Grid.Row="3" x:Name="requestLeaveButton" Content="REQUEST FOR A LEAVE"  
                        Foreground="White" Height="40" Margin="0,10,0,0"
                        BorderThickness="0" 
                        Click="requestLeaveButton_Click" />
            </Grid>
        </Grid>
    </Border>
</UserControl>
